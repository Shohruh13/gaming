<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Challenge: Create a solar system</title>
        <style>

           
           
        </style>
    </head>
    <body>
        <canvas id = "myCanvas" width = "600px" height = "500px"></canvas>
        <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
        <script>
            var sketchProc = function(processingInstance) {
             with (processingInstance) {
                size(1000,600); 
                frameRate(30);
                
                // ProgramCodeGoesHere
                noStroke();
scale(1/4,1);


background(122, 217, 193);
var s = 0;
var sew = createFont("cursive");
var fontss = createFont("monospace");
var nX = 500;
var nY = 160;
var dX = 100;
var dY = 300;
var b = 150;
var w = 0;
var bb = 150;
var ww = 0;
var bbb = 255;
var www = 0;
var r = 255;
var g = 0;
var blue1 = 0;
var levels = 1;
var currentscene;
var confirm1 = true;
var n = 0;
var minute_ = 0;
var jump = true;
var pauseX = 400;
var pauseY = 100;
var pauseWidth = 1600;
var pauseHeight = 350;
var clouds = function(r,y, b,g) {
    scale(4,1);
    fill(189, 255, 233);
    ellipse(r,y,b * 2,g);
    ellipse(r + b * 2, y + g/2.4, b * 4, g* 2);
    scale(1/4,1);

};
var swoosh = [];
var generator = random(0,500);
var Round = round(n/53);
var swooshX = 0;
var ice = false;
var background1 = 141;
var background2 = 228;
var background3 = 240;
var tc = 0;
var pause = true;
var sky = "day";
var happyface = false;
var sadface = false;
var neutral = true;
var move = true;
var inWater = false;
var timer = 0;
var sunrise = false;
var Camera = {

    x : 0,
    y : 0

};
var cam = false;
var tj = 0;
var tj2 = 0;
var menu = true;
var level1x = 900;
var level2x = 1700;
var level3x = 2500;
var level4x = 3300;
var level5x = 4100;
var level6x = 4900;
var level7x = 5700;
var level8x = 6500;
var level1 = true;
var level2 = false;
var level3 = false;
var level4 = false;
var level5 = false;
var level6 = false;
var level7 = false;
var level8 = false;
var y = 0;
var level = 0;
var ws = 0;
var doorx1 = 12800;
var doorx2 = 12950;
var ms = 15;
var ms1 = 14.99;
var leveleffect = true;
var leveleffect2 = true;
var windows = [];
var ladderdesign = [];
var laddersteps = [];
var ladderI = false;
var ladderdown = false;
var laddertime = 0;
var ladderjump = false;
var bigcloud = 2000;
var canvasX = width;
var canvasY = height;
var lock = true;
var locky = true;
var mheight = 50;
var hm = 800;
var stocks = 5;
var menuscene2 = false;
var shapechange = 20;
var circle = false;
var lefti = false;
var wc = 110;
var wc2 = 250;
var wc3 = 243;
var roomlight = 0;



var liness = function(x,y,width){

    this.x = x;
    this.y = y;
    this.width = width;

};
liness.prototype.display = function(){

    fill(0, 0, 0);
    rect(this.x,this.y, this.width, 2);

};

var phone = function(x,y,wiidth,height){

    fill(0, 0, 0);



};


/*****************************
  /////////////////////////////////
  ///////////////////////////////
 Everything related towards the character
 /////////////////////////////////
 //////////////////////////////////
  **************************/
  var snowballs = function(x,y){
    
    this.x = x;
    this.y = y;
    this.width = 30;
    this.height = 30;
    
};
  
  snowballs.prototype.display = function(){
  
  fill(255, 255, 255);
  ellipse(this.x,this.y,this.width*4,this.height);
  
  };
  snowballs.prototype.fallover = function(){
  
  this.x-=1;
  this.y+=random(0.2,1);
  
  };
  
  var snowing = [];
  var interact = [];
    
  var square = function(x,y,width,height){
  
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
  
  };
  square.prototype.square = function(){
  
  scale(4,1);
  stroke(0, 255, 30);
  strokeWeight(15);
  fill(230,255,0);
  rect(this.x,this.y,this.width,this.height,15);
  noStroke();
  scale(1/4,1);
  
  
  };
  
  var frame = new square(200,174,200,200);
  var glass = function(x,y){
    
    this.x = x;
    this.y = y;
    
    
  
  };
  glass.prototype.display = function(){
  
    fill(wc,wc2,wc3);
    stroke(252, 252, 252);
    strokeWeight(10);
    scale(4,1);
    rect(this.x,this.y,50,50,5);
    rect(this.x+ 50,this.y,50,50,5);
    rect(this.x+ 50,this.y+50,50,50,5);
    rect(this.x,this.y + 50,50,50,5);
    noStroke();
    fill(0, 0, 0);
    rect(this.x + 190, this.y - 200, 20, 250);
    fill(255, 234, 0);
    ellipse(this.x + 200, this.y + 50, 40,40);
    fill(0, 0, 0);
    arc(this.x + 200, this.y + 50, 100,100,180, 359);
    
    scale(1/4,1);
  
  };
  
  
var character = function(m ,x, y,r ,g ,b,o ) {

    this.mass = m;
    this.position = new PVector(x,y);
    this.velocity = new PVector(0,0);
    this.acceleration = new PVector(0,0);
    this.money = 0;
    this.r = r;
    this.g = g;
    this.b = b;
    this.opacity = o;
};
  

character.prototype.applyForce = function (force) {

    
    var f = PVector.div(force,this.mass);
    this.acceleration.add(f);
    
};
character.prototype.update = function() {

    this.velocity.add(this.acceleration);
    this.position.add(this.velocity);
    this.acceleration.mult(0);
    

};
character.prototype.checkedges = function() {

    if(this.position.y >= 2000) {
        
       
        
        this.position.y = nY;
        this.position.x = nX;
        this.velocity.y = 0;
        this.velocity.x = 0;
        s++;
        stocks-=1;
        
        currentscene = currentscene;
        
    }
    
    

};
character.prototype.collect = function(coin) {

    if((coin.x >= this.x - 60 && coin.x <= (this.x + 60)) && (coin.y >= this.y - 15 && coin.y <= (this.y + 15)))
    
    {
        coin.y = -2000;
        this.money++;
        
    }

};
character.prototype.happyface = function(){

if(currentscene === 2){scale(1/2,1/2);}
else{
    scale(1,1);
    
}
    fill(tc,tc,tc);
    
    ellipse(this.position.x - this.mass * 15/5,this.position.y - this.mass * 1/5,this.mass * 4,this.mass * 1);
    
    ellipse(this.position.x + this.mass * 15/5,this.position.y - this.mass * 1/5,this.mass * 4,this.mass * 1);

    arc(this.position.x,this.position.y + this.mass * 2/3 ,8/5 * this.mass * 5/2, this.mass , 0,180);

    fill(0,0,0);
    scale(4,1);
};
character.prototype.sadface = function(){

    scale(1,1);
    fill(tc,tc,tc);
    ellipse(this.position.x - this.mass * 15/5,this.position.y - this.mass * 1/5,this.mass * 4,this.mass * 1);
    
    ellipse(this.position.x + this.mass * 15/5,this.position.y - this.mass * 1/5,this.mass * 4,this.mass * 1);

    
    arc(this.position.x ,this.position.y + 3/4 * this.mass,8/5 * this.mass * 5/2, this.mass , 180,360);
    
    fill(0,0,0);
    scale(4,1);
};

var npc = function(m,x,y,r,g,b,o){

    this.x = x;
    this.y = y;
    this.mass = m;
    this.r = r;
    this.g = g;
    this.b = b;
    this.opacity = o;
    

};
npc.prototype.display = function(){

    fill(this.r,this.g,this.b,this.o);
    rect(this.x,this.y - 5,this.mass * 12 + 5, this.mass * 3 - 3.5);


};
npc.prototype.sadface = function(){

    scale(1,1);
    fill(tc,tc,tc);
    ellipse(this.x + this.mass * 3,this.y + this.mass -5,this.mass * 4,this.mass * 1);
    
    ellipse(this.x + this.mass * 8,this.y + this.mass -5 ,this.mass * 4,this.mass * 1);

    
    arc(this.x + this.mass *5.5,this.y + this.mass * 2.3 - 5,8/5 * this.mass * 5/2, this.mass , 180,360);
    
    fill(0,0,0);
    scale(4,1);
};




var man = new character(10,500,100,255,255,255,1500);
var dude = new character(10,350,250,0,0,255,1500);




var towerman = new npc(20,3010,1299,50,0,255,1500);

var coin = function(x,y) {

    this.x = x;
    this.y = y;
    this.collect = false;

};
coin.prototype.display = function() {

    fill(153, 142, 15);
    ellipse(this.x,this.y,160,40);

};
var worldsquare = function(x,y,width,height, r, g, b,opacity){
  
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.opacity = opacity;
    this.r = r;
    this.g = g;
    this.b = b;
  
  };

worldsquare.prototype.display = function(word){


    fill(120,120,120,150);
    rect(this.x + 40,this.y- 10,this.width,this.height,10);
    fill(this.r,this.g,this.b,this.opacity);
    rect(this.x,this.y,this.width,this.height,10);
    
    
    pushMatrix();
    
    fill(0, 0, 0);
    scale(4,1);
    textSize(20);
    
    popMatrix();
    

};
worldsquare.prototype.interaction = function(number){
  
  if(man.position.x + 60 >= this.x && man.position.x -60 <= this.x + this.width && man.position.y + 15 >= this.y && man.position.y -15 <= this.y + this.height){
      
      currentscene = number;
      
      
  }
  
  
  
  };



var tower = function(x,y,width,height){
    
    
    

    fill(102, 102, 102,300);
    rect(x ,y ,width,height);
    fill(0, 0, 0);
    rect(x + 460,y + 1060,290,150);
    fill(0, 0, 0);
    rect(100,1100,200,100);
    fill(102,102,102,300);
    rect(doorx1 - 150, y+ 1000,  160 , 100);
    rect(doorx2 - 150, y+ 1000,  160 , 100);
    fill(133, 82, 0);
    rect(doorx1 - 140, y+ 1100,  150 , 100);
    arc(doorx1 + 10,y + 1110,300,100,180,270);
    rect(doorx2 - 150, y+ 1100,  150 , 100);
    arc(doorx2 - 150,y + 1110,300,100,270,359.99);
    fill(0, 0, 0);
    ellipse(doorx1- 50,y + 1130,60,15);
    ellipse(doorx2- 90,y + 1130,60,15);

    if(currentscene === 2){
        
            if(man.position.x -60 >= x + 450 && man.position.x +60 <= x +750 && man.position.y >= y + 1100 && man.position.y <= y + 1200){
            
            
            doorx1-=1;
            doorx2+=1;
            
            if(doorx1 <= 12450){doorx1 = 12451;}
            if(doorx2 >= 12900){doorx2 = 12899;}
            
     }
        
        if(keyPressed){
            
            if(keyCode === 38){
                
                
                if(man.position.x -60 >= x + 450 && man.position.x +60 <= x +750 && man.position.y >= y + 1100 && man.position.y <= y + 1200){
                    
                    
                  
                  currentscene = 3;
                  man.position.y = 1000;
                  man.position.x = 500;
                  man.display();
                    
                }
            
            }
            
            
            
                
                
                
            
            
            
            
            
            
            
            
        }
        
        
        if(man.position.x +60 <= x + 450 ){
            
            doorx1 +=1;
            doorx2 -=1;
            
            
            if(doorx2 <= 12760){doorx2 = 12761;}
            if(doorx1 >= 12590){doorx1 = 12589;}
            
        
        }
        if( man.position.y >= y + 1200 ){
            
            doorx1 +=1;
            doorx2 -=1;
            
            
            if(doorx2 <= 12760){doorx2 = 12761;}
            if(doorx1 >= 12590){doorx1 = 12589;}
            
        
        }
        if( man.position.y <= y + 1100 ){
            
            doorx1 +=1;
            doorx2 -=1;
            
            
            if(doorx2 <= 12760){doorx2 = 12761;}
            if(doorx1 >= 12590){doorx1 = 12589;}
            
        
        }
        if( man.position.x >= x + 750 ){
            
            doorx1 +=1;
            doorx2 -=1;
            
            
            if(doorx2 <= 12760){doorx2 = 12761;}
            if(doorx1 >= 12590){doorx1 = 12589;}
            
        
        }
        
        
        
    }



};



var rectangle = function(x,y,width,height) {

    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    
    
    
};
rectangle.prototype.display = function() {
    
    
    fill(3, 255, 11);
    rect(this.x,this.y,this.width,this.height ,5);
    fill(77, 50, 3);
    rect(this.x,this.y+10,this.width,this.height-10);
    fill(120,120,120,150);
    if(currentscene > -1){
    if(man.position.x -60 >= this.x && man.position.x +60<= this.x + this.width && man.position.y <= this.y)
    
    {
        if(circle === false){
        pushMatrix();
        rectMode(CENTER);
        rect(man.position.x ,this.y+5,man.mass * 12,10);
        rectMode(CORNER);
        popMatrix();
        
        }
        
        if(circle === true){pushMatrix();
        rectMode(CENTER);
        ellipse(man.position.x ,this.y+7,man.mass * 12,15);
        rectMode(CORNER);
        popMatrix();}
        
    }}
    
};
rectangle.prototype.drawlava = function() {

    fill(201, 28, 28);
    rect(this.x,this.y,this.width,this.height,5);

};
rectangle.prototype.star = function() {

fill(255, 204, 0);
rect(this.x,this.y, this.width,this.height,5);

};
rectangle.prototype.quicksand = function(){

    fill(255, 132, 0);
    rect(this.x,this.y,this.width,this.height);

};
rectangle.prototype.thin = function(a) {

    fill(3,255,11);
    rect(this.x,this.y,this.width,this.height);
    fill(77, 50,3,100);
    rect(this.x,this.y+10,this.width,this.height + a);

};
rectangle.prototype.ice = function(){
    
    fill(255, 255, 255);
    ellipse(this.x+ this.width * 3/4, 7/8 * this.y,7/10 * this.width,this.height/2);
    fill(5, 255, 213);
    rect(this.x,this.y,this.width,this.height,5);
    fill(3, 75, 77);
    rect(this.x,this.y+10,this.width,this.height-10);
    
};
rectangle.prototype.water = function() {

fill(122, 149, 255);
rect(this.x,this.y, this.width,this.height,5);

};
rectangle.prototype.floor = function(){

    fill(148, 148, 148);
    rect(this.x,this.y, this.width,this.height);

};
rectangle.prototype.ladder = function(){

    for(var i = 0; i <   this.height/10; i++)
    {
        ladderdesign[i] = new liness (this.x, this.y + i * 10,this.width);
        ladderdesign[i].display();
        
    }

    fill(153, 97, 0);
    rect(this.x, this.y, 20, this.height);
    rect(this.x + this.width - 20, this.y, 20, this.height);
    
    


};

currentscene = -1;
/***********************************
///////////////////////////////////////
The main function for this creation
///////////////////////////////////////
************************************/


draw = function() {
    
    background(background1,background2,background3);
    
    
    var gmass = 0.1 * man.mass;
    var gravity = new PVector ( 0, 0.1 * man.mass);
    var right = new PVector (6.99,0);
    var wind = new PVector (-2,0);
    var left = new PVector (-6.99,0);
    var up = new PVector (0,-0.4);
    var down = new PVector(0,2);
    var c = 0.4;
    var normal = 1;
    var frictionMag = c * normal;
    var friction = man.velocity.get();
    var pauseScreen = function(){

    n+=-1;
    move = false;
    
    strokeWeight(15);
    stroke(0, 0, 0);
    scale(1/4,1);
    fill(21, 255, 0);
    rect(pauseX,pauseY,pauseWidth,pauseHeight);
    fill(0, 92, 3);
    scale(4,1);
    textSize(20);
    text("Pause Screen",200,150);
    textSize(16);
    text("Press the down key to return to menu",130,200);
    text("Press the left key to go back a level. Beat a level or touch the gound to reuse the pause screen again",129,260,350,500);
    noStroke();
    
    rect(250,320,20,40);
    rect(300,320,20,40);
    rect(240,400,100,20);
    rect(220,360,20,60);
    rect(330,360,20,60);
    
    textSize(12);
    if(keyPressed){
        
        if(keyCode === 40){ currentscene = -1;
        man.position.x = nX;
        man.position.y = nY;
        man.velocity.x = 0;
        man.velocity.y = 0;
        
        
        }
        
        
        if(keyCode === 37){ 
        
        currentscene -= 1;
        pause = false;
        man.position.x = nX;
        man.position.y = nY;
        man.velocity.x = 0;
        man.velocity.y = 0;
        
        }
        
    }
    
    
    
};

    friction.mult(-1);
    friction.normalize();
    friction.mult(frictionMag);
    
    
    if(cam === true){
    
    fill(0, 0, 0);
    
     if(hm <= 0){
     
        man.position.x = nX;
        man.position.y = nY;
        man.velocity.x = 0;
        man.velocity.y = 0;
        currentscene = 0;
        
        hm = 800;
        stocks -=1;
        
        
        s ++;
        
        
 }
     if(stocks <= 0){ currentscene = -1; stocks = 5;}
    
    
    if(keyPressed){
        
         if(move === true){
         
         if(keyCode === 37 ) {man.applyForce(left); lefti = true;}
    else if(keyCode === 39) {man.applyForce(right); lefti = false;}
    else if(key.code === 32) {
        
        playSound(getSound("rpg/battle-swing"));
        if(shapechange >= 20){
            
            if(lefti === true){ if(man.velocity.y > 0){man.acceleration.y = 0; man.velocity.y =-3; shapechange = 0; man.acceleration.x = 0; man.velocity.x +=-27;}}
        if(lefti === false){
    if(man.velocity.y > 0){man.acceleration.y = 0; man.velocity.y =-3; shapechange = 0; man.acceleration.x = 0; man.velocity.x +=27;}}
    
    if(lefti === true){ if(dude.velocity.y > 0){dude.acceleration.y = 0; dude.velocity.y =-3; shapechange = 0; dude.acceleration.x = 0; dude.velocity.x +=-27;}}
        if(lefti === false){
    if(dude.velocity.y > 0){dude.acceleration.y = 0; dude.velocity.y =-3; shapechange = 0; dude.acceleration.x = 0; dude.velocity.x +=27;}}
    
    
    
    }}
    else if(keyCode === 65){circle = true;}
    else if(keyCode === 83){circle = false;}
    else if(keyCode === 40){man.applyForce(down);}
    
         }
         else{ms = 15; ms1 = 14.99;}
         
         
         if(keyCode === 37) {dude.applyForce(left);}
    else if(keyCode === 39) {dude.applyForce(right);}
    else if(keyCode === 40) {dude.applyForce(down);}
         
         
         if(man.velocity.x >=ms){man.velocity.x = ms1;}
         if(man.velocity.x <=-ms){man.velocity.x = ms1 * -1;}
        

   
    
         
}




if(currentscene === 2){
    
    Camera.y -=60;
    Camera.x -=70;
    
    Camera.x += (man.position.x/2 - Camera.x - width/4)/10;
    Camera.y += (man.position.y - Camera.y - height/4)/10;
    translate(-Camera.x,-Camera.y/1.8);
    
}
else{
    Camera.y -=5;
    Camera.x -=70;
    Camera.x += (man.position.x - Camera.x - width/2)/10;
    
   
  
         Camera.y += (man.position.y - Camera.y - height/2)/5;
    translate(-Camera.x,-Camera.y);

    }
    }
    
    
    

    
    /// Creates the functions for the lava and normal tiles.
    rectangle.prototype.interaction = function() {

    constrain(man.position.y,this.y + this.height/10, this.y + this.height-1);

    if(man.position.y + man.mass * 1.5 > this.y -4 && man.position.y - 16<= this.y+ 10 && man.position.x + 60>= this.x  && man.position.x - 60 < this.x + this.width ){
        
        if(circle === false){
        tj ++;
        shapechange = 20;
        if(keyPressed){
            
            if(keyCode === 40){down.y = -25; down.x = 0;}
            
            
        }
        
    }


    if(  man.mass * 1.5 + man.position.y  > this.y  && man.position.y -  16 <= this.y+ 10 && man.position.x + 60>= this.x + 10  && man.position.x - 60 < this.x + this.width - 10)
    { 
       if(circle === false){
       if(down.y >= -5){
           
            if(man.mass <=10){down.y = -20;}
           down.y = -10;
           
           
       }
      
       
       
       up.y = -45;
        man.velocity.y = -0.3;
        pause = true;
        
        gravity.y = 0;
        if(keyPressed) {
            
            if(keyCode === 37) {
                
                man.acceleration.x-=1;
                
            }
            if(keyCode === 39) {
                
                man.acceleration.x+=1;
                
            }
           else if(keyCode === 40){
               
              
             
               man.velocity.y = -0.38;
               
             
               
               
           }
            
        }
        
        if(keyPressed){if(key.code === 32){shapechange = 0;}}
        
        if(keyPressed){
            
            
        
         if(keyCode === 38) {
             
             
             
             playSound(getSound("rpg/battle-swing"));
             
             if(tj <= 10 && tj2 === 1){ man.velocity.y -= 1; tj2 = 2;}
             
             else{tj2 = 0;}
             
             tj = 0;
             
             tj2 =1;
             man.velocity.y -=5.2;
             up.y -=10;
             
         
         
         }
         
        }
        else{man.velocity.x *= 0.7; }
        
    }}
    
    if(circle === true){
        
        
        man.velocity.y =-7;
        playSound(getSound("rpg/battle-swing"));
        shapechange = 20;
        
    }
    
    }
    

    
    
    if(man.position.y + 1.3 * man.mass >= this.y + this.height  && man.position.y - 1.5 * man.mass<= this.y + this.height && man.position.x + 60>= this.x - 2  && man.position.x  -60 <= this.x + this.width -2)
    { 
       
        man.velocity.y = 0.48;
        
        
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(man.position.y + man.mass * 6/5 >= this.y +10 && man.position.y - man.mass * 6/5 <= this.y + this.height   && man.position.x + man.mass * 6 >= this.x  && man.position.x <= this.x )
    { 
       
        man.velocity.x +=-5;
        man.velocity.x *= 0.2;
       
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                man.velocity.y = -4;
                man.velocity.x = -3;
                playSound(getSound("rpg/battle-swing"));
                shapechange = 20;
            }
            if(keyCode === 37) {
                
                man.velocity.y = -4;
                man.velocity.x = -10;
                playSound(getSound("rpg/battle-swing"));
                shapechange = 20;
            }
            if(key.code === 32){man.velocity.x = -20;}
            
            
        }
        
        if(man.velocity.x >=20){man.velocity.x *=-0.8;}
        
        if(keyPressed){
        
        
        if(keyCode === 39){
                
                man.velocity.y +=0.03;
                man.position.x = this.x - man.mass * 5.9;
                
            }
        
    }
        
    }
    
     
    
    if(man.position.y + 16 >= this.y + 10  && man.position.y -16 <= this.y + this.height  &&  man.position.x > this.x + this.width - 10 && man.position.x - man.mass * 6 <= this.x + this.width)
    { 
       
        man.velocity.x +=5;
        man.velocity.x*=0.2;
        
        if(man.velocity.x >= 10) {man.velocity.x *=-1;}
       
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                shapechange = 20;
                man.velocity.y =-4;
                man.velocity.x = 3;
                playSound(getSound("rpg/battle-swing"));
                
            }
             else if(keyCode === 39) {
                
                shapechange = 20;
                man.velocity.y = -4;
                man.velocity.x = 10;
                playSound(getSound("rpg/battle-swing"));
                
            }
             else if(key.code === 32) {
                
                man.velocity.x = -20;
                
            }
            
            
            
        }

        if(man.velocity.x <=-20){man.velocity.x *=-0.8;}

        if(keyPressed){
        
        
        if(keyCode === 37){
                
                man.velocity.y +=0.03;
                man.position.x = this.x + this.width + man.mass * 5.9 ;
                
            }
        
    }
        
    }
     if(man.position.y + 16 > this.y  && man.position.y - 16<= this.y + 10 && man.position.x + 60>= this.x + 10  && man.position.x - 60 < this.x + this.width - 10){
         
         
         if(ladderI === true){
             
             
             if(keyPressed){
                 
                 if(keyCode === 40){man.position.y -=3;}
                 
             }
             
         }
         
     }
     if(man.position.y - 16 > this.y + this.height - 10 && man.position.y - 16<= this.y + this.height && man.position.x + 60>= this.x + 10  && man.position.x - 60 < this.x + this.width - 10){
         
         
         if(ladderI === true){
             
            
             if(keyPressed){
                 
                 if(keyCode === 38){man.position.y +=3;}
                 
             }
             
         }
         
     }
    


};
    rectangle.prototype.lavainteraction = function() {

    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(man.position.y + 16 >= this.y -1  && man.position.y - 16<= this.y+ 2 && man.position.x + 60>= this.x +2 && man.position.x - 60 < this.x + this.width -2)
    { 
       playSound(getSound("retro/boom1"));
        
        man.velocity.y =-1;
        
        
        hm-=10;
        
        
    }    
    if(man.position.y + 16 >= this.y + this.height -1  && man.position.y - 16<= this.y+ this.height + 2 && man.position.x + 60>= this.x +2 && man.position.x - 60 < this.x + this.width -2)
    { 
       playSound(getSound("retro/boom1"));
        
        man.velocity.y =1;
        
        
        hm-=10;
        
        
    }    
    if(man.position.y + 16 >= this.y  -1  && man.position.y - 16<= this.y+ this.height + 2 && man.position.x + 60>= this.x -1 && man.position.x - 60 < this.x + 2)
    { 
       playSound(getSound("retro/boom1"));
        
        man.velocity.x *= -1;
        
        
        hm-=10;
        
        
    }    
    if(man.position.y + 16 >= this.y  -1  && man.position.y - 16<= this.y+ this.height + 2 && man.position.x + 60>= this.x + this.width - 2 && man.position.x - 60 < this.x + this.width+ 1)
    { 
       playSound(getSound("retro/boom1"));
        
        man.velocity.x *= -1;
        
        
        hm-=10;
        
        
    }      

};
    rectangle.prototype.sandinteraction = function() {

    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(man.position.y + 16 >= this.y  && man.position.y - 16<= this.y+ this.height && man.position.x -60>= this.x  && man.position.x + 60 < this.x + this.width)
    { 
     
        man.velocity.y = 0.2;
        man.velocity.x = 0;
        up.y = -10;
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(man.position.y + 16 >= this.y + this.height - 10  && man.position.y - 16<= this.y + this.height && man.position.x - 60>= this.x  && man.position.x + 60 < this.x + this.width)
    { 
       
        
        man.velocity.y = 0.2;
        man.velocity.x = 0;
        up.y = -10;
        
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(man.position.y + 16 >= this.y  && man.position.y <= this.y + this.height-10 && man.position.x - 60>= this.x  && man.position.x <= this.x + 10)
    { 
       man.velocity.y = 0;
        man.velocity.x = 0;
        up.y = -10;
       
    }
    
    else{gravity.set(0,0.1 * man.mass);}
    
    if(man.position.y + 16 >= this.y  && man.position.y <= this.y + this.height-10 &&  man.position.x > this.x + this.width - 10 && man.position.x + 60 <= this.x + this.width)
    { 
       
        man.velocity.y = 0;
        man.velocity.x = 0;
        up.y = -10;
    }
    else{gravity.set(0,0.1 * man.mass);}


};
    rectangle.prototype.thininteraction = function() {

       constrain(man.position.y,this.y + this.height/10, this.y + this.height-1);

    if(man.position.y + 16 > this.y && man.position.y - 16<= this.y+ 1 && man.position.x + 60>= this.x  && man.position.x - 60 < this.x + this.width ){
        
        shapechange = 20;
        tj ++;
        if(keyPressed){
            
            if(keyCode === 40){down.y = -25; down.x = 0;}
            
        }
        
    }


    if(man.position.y + 16 > this.y + 1  && man.position.y - 16<= this.y - 1 && man.position.x + 60>= this.x  && man.position.x - 60 < this.x + this.width )
    { 
       if(circle === false){
       if(down.y >= -5){down.y = -2;}
       
       
       up.y = -45;
        man.velocity.y = -0.3;
        pause = true;
        
        gravity.y = 0;
        if(keyPressed) {
            
            if(keyCode === 37) {
                
                man.acceleration.x-=1;
                
            }
            if(keyCode === 39) {
                
                man.acceleration.x+=1;
                
            }
           else if(keyCode === 40){man.velocity.y = -0.38;}
            
        }
        
        if(keyPressed){
        
         if(keyCode === 38) {
             
             playSound(getSound("rpg/battle-swing"));
             
             if(tj <= 10 && tj2 === 1){ man.velocity.y -= 1; tj2 = 2;}
             
             else{tj2 = 0;}
             
             tj = 0;
             
             tj2 =1;
             man.velocity.y -=5.2;
             up.y -=10;
             
         }
         
         
         
        }
        
        else{man.velocity.x *= 0.7; }}
        
        if(circle === true){
            
            man.velocity.y =-7;
            playSound(getSound("rpg/battle-swing"));
            
        }
        
    }      
       
             
        
    
    


};
    rectangle.prototype.wallinteraction = function(){
    
        if(man.position.y +16 >= this.y + 10  && man.position.y <= this.y + this.height  && man.position.x + 60 >= this.x  && man.position.x <= this.x )
    { 
       
        man.velocity.x +=-2;
        man.velocity.x*=0.2;
        
    }
     
    
    if(man.position.y + 16 >= this.y + 10  && man.position.y <= this.y + this.height &&  man.position.x > this.x + this.width - 10 && man.position.x - 60 <= this.x + this.width)
    { 
       
        man.velocity.x +=2;
        man.velocity.x*=0.2;
        
    
        
    }
    


    
    
    };
    rectangle.prototype.starinteraction = function(){};
    rectangle.prototype.iceinteraction = function() {

    constrain(man.position.y,this.y + this.height/10, this.y + this.height-1);


    if(man.position.y + 16 > this.y  && man.position.y - 16<= this.y+ 10 && man.position.x + 60>= this.x  && man.position.x - 60 < this.x + this.width )
    { 
       up.y = -45;
        man.velocity.y = -0.38;
        
        gravity.y = 0;
        if(keyPressed) {
            
            if(keyCode === 37) {
                
                man.acceleration.x = -0.14;
                
            }
            if(keyCode === 39) {
                
                man.acceleration.x = 0.14;
                
            }
            
        }
        
        if(keyPressed){
        
         if(keyCode === 38 ) {man.applyForce(up);}}
        else{man.velocity.x *= 0.99;}
        
    }
    
    
    if(man.position.y + 16 >= this.y + this.height - 10  && man.position.y - 16<= this.y + this.height && man.position.x + 60>= this.x  && man.position.x - 60 < this.x + this.width)
    { 
       
        man.velocity.y = 0.38;
        
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(man.position.y +16 >= this.y + 10  && man.position.y <= this.y + this.height  && man.position.x + 60 >= this.x  && man.position.x <= this.x )
    { 
       
        man.velocity.x +=-2;
        man.velocity.x*=0.2;
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                man.velocity.y = -4;
                man.velocity.x = -3;
                
            }
            else if(keyCode === 37) {
                
                man.velocity.y = -4;
                man.velocity.x = -10;
                
            }
            
            
        }
        
    }
    
     
    
    if(man.position.y + 16 >= this.y + 10  && man.position.y <= this.y + this.height &&  man.position.x > this.x + this.width - 10 && man.position.x - 60 <= this.x + this.width)
    { 
       
        man.velocity.x +=2;
        man.velocity.x*=0.2;
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                man.velocity.y = -4;
                man.velocity.x = 3;
                
            }
             else if(keyCode === 39) {
                
                man.velocity.y = -4;
                man.velocity.x = 10;
                
            }
            
            
            
        }
        
    
        
    }
    else{gravity.set(0,0.1 * man.mass);}


};
    rectangle.prototype.waterinteraction = function() {

    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(man.position.y + 16 >= this.y  && man.position.y - 16<= this.y+ this.height && man.position.x >= this.x  && man.position.x < this.x + this.width)
    { 
        
        man.velocity.y = 0.2;
        man.velocity.x = 0;
        up.y = -30;
        left.x = -40;
        right.x = 40;
        down.y = 30;
        gravity.y = -2;
        friction.y = 0;
        if(keyPressed){
            
            if(keyCode === 38){man.applyForce(up);}
            if(keyCode === 37){man.applyForce(left);}
            if(keyCode === 39){man.applyForce(right);}
            if(keyCode === 40){man.applyForce(down);}
            
        }
    }
    };
    rectangle.prototype.dudewaterinteraction = function() {

    constrain(man.position.y,this.y + 1, this.y + this.height-1);
    inWater = true;

    if(dude.position.y + 16 >= this.y  && dude.position.y - 16<= this.y+ this.height && dude.position.x >= this.x  && dude.position.x < this.x + this.width)
    { 
     
        dude.velocity.y = 0;
        dude.velocity.x = 0;
        up.y = -15;
        left.x = -20;
        right.x = 20;
        down.y = 15;
        gravity.y = 6;
        
        if(keyPressed){
            
            if(keyCode === 38){dude.applyForce(up); move = false;}
            
            
        }
    }
    else{move = true;}
    };
    rectangle.prototype.dudeinteraction = function() {

    constrain(dude.position.y,this.y + this.height/10, this.y + this.height-1);


    if(dude.position.y + 16 > this.y  && dude.position.y - 16<= this.y+ 10 && dude.position.x + 60>= this.x  && dude.position.x - 60 < this.x + this.width )
    { 
       up.y = -45;
        dude.velocity.y = -0.2;
        if(inWater === true){
            
          dude.acceleration.y = -0.2;  
            
        }
        
        gravity.y = 0;
        if(keyPressed) {
            
            if(keyCode === 37) {
                
                dude.acceleration.x = -0.14;
                
            }
            if(keyCode === 39) {
                
                dude.acceleration.x = 0.14;
                
            }
            
        }
        
        if(keyPressed){
        
        
        
         if(keyCode === 38 ) {dude.applyForce(up);}}
        else{dude.velocity.x *= 0.7;}
        
    }
    
    
    if(dude.position.y + 16 >= this.y + this.height - 10  && dude.position.y - 16<= this.y + this.height && dude.position.x + 60>= this.x  && dude.position.x - 60 < this.x + this.width)
    { 
       
        dude.velocity.y = 0.38;
        if(inWater === true){
            
          dude.acceleration.y = 0.06;  
            
        }
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(dude.position.y +16 >= this.y + 10  && dude.position.y <= this.y + this.height  && dude.position.x + 60 >= this.x  && dude.position.x <= this.x )
    { 
       
        dude.velocity.x +=-2;
        dude.velocity.x*=0.2;
       
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                dude.velocity.y = -4;
                dude.velocity.x = -3;
                
            }
            else if(keyCode === 37) {
                
                dude.velocity.y = -4;
                dude.velocity.x = -10;
                
            }
            
            
        }
        
        if(inWater === true){
            
          dude.acceleration.x = -0.2;
          dude.velocity.x = -0.2;
            
        }
        
        
    }
    
     
    
    if(dude.position.y + 16 >= this.y + 10  && dude.position.y <= this.y + this.height &&  dude.position.x > this.x + this.width - 10 && dude.position.x - 60 <= this.x + this.width)
    { 
       
        dude.velocity.x +=2;
        dude.velocity.x*=0.2;
       
        if(keyPressed) {
            
            if(keyCode === 38) {
                
                dude.velocity.y = -4;
                dude.velocity.x = 3;
                
            }
             else if(keyCode === 39) {
                
                dude.velocity.y = -4;
                dude.velocity.x = 10;
                
            }
            
            
            
        }
        
    if(inWater === true){
            
          dude.acceleration.x = 0.2;
          dude.velocity.x = 0.2;
            
        }
        
    }
    else{gravity.set(0,0.1 * man.mass);}


};
    rectangle.prototype.dudelavainteraction = function() {

    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(dude.position.y + 16 >= this.y  && dude.position.y - 16<= this.y+ this.height && dude.position.x + 60>= this.x  && dude.position.x - 60 < this.x + this.width)
    { 
        hm-=1;
        
        if(hm <= 0){
        
        dude.position.x = nX;
        dude.position.y = nY;
        dude.velocity.x = 0;
        dude.velocity.y = 0;
        s++;
        currentscene = -1;}
    }
    
    
    


};
    rectangle.prototype.dudestarinteraction = function() {

    
    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(dude.position.y + 16 >= this.y  && dude.position.y - 16<= this.y+ 10 && dude.position.x + 60>= this.x  && dude.position.x - 60 < this.x + this.width)
    { 
       
       dude.position.x = nX;
        dude.position.y = nY;
        dude.velocity.x = 0;
        dude.velocity.y = 0;
        currentscene ++;
        pause = true;
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(dude.position.y + 16 >= this.y + this.height - 10  && dude.position.y - 16<= this.y + this.height && dude.position.x + 60>= this.x  && dude.position.x - 60 < this.x + this.width)
    { 
       
        dude.position.x = nX;
        dude.position.y = nY;
        dude.velocity.x = 0;
        man.velocity.y = 0;
        currentscene++;
        pause = true;
        
    }
    else{gravity.set(0,0.1 * man.mass);}
    
    if(dude.position.y + 16 >= this.y  && dude.position.y <= this.y + this.height-10 && dude.position.x + 60>= this.x  && dude.position.x <= this.x + 10)
    { 
       
        dude.position.x = nX;
        dude.position.y = nY;
        dude.velocity.x = 0;
        dude.velocity.y = 0;
        currentscene++;
        pause = true;
       
    }
    
    else{gravity.set(0,0.1 * man.mass);}
    
    if(dude.position.y + 16 >= this.y  && dude.position.y <= this.y + this.height-10 &&  dude.position.x > this.x + this.width - 10 && dude.position.x - 60 <= this.x + this.width)
    { 
       
        dude.position.x = nX;
        dude.position.y = nY;
        dude.velocity.x = 0;
        dude.velocity.y = 0;
        currentscene++;
        pause = true;
        
        
    }
    else{gravity.set(0,0.1 * man.mass);}


};
    rectangle.prototype.ladderinteraction = function() {

    
   
    constrain(man.position.y,this.y + 1, this.y + this.height-1);


    if(man.position.y + 16 >= this.y  && man.position.y - 16<= this.y+ this.height && man.position.x + 60 >= this.x  && man.position.x - 60 < this.x + this.width)
    { 
        if(ladderI === true){
        
        
        man.velocity.x = 0;
        man.velocity.y = -0.1;
        up.y = -50;
        left.x = -40;
        right.x = 40;
        down.y = 30;
        gravity.y = -2;
        friction.y = 0;
        
        }
        
    
        if(keyPressed){
            
            if(keyCode === 38){ playSound(getSound("rpg/step-heavy")); man.position.y -=3; ladderjump = true; ladderI = true; }
            
            if(ladderI === true){
            
            if(keyCode === 37){ man.position.x -=6;}
            if(keyCode === 39){ man.position.x +=6;}
            
            }
            
            
            
            if(keyCode === 40){ playSound(getSound("rpg/step-heavy"));ladderjump = true; ladderI = true; man.position.y +=3;}
            
            if(key.code === 32){ladderI = false; ladderjump = false; man.velocity.y =-5.2;}
            
            }
            
            
        
        
        
        
    }
    else {ladderI = false;}
     
    };


    
    var numbers = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
    
    character.prototype.display = function() {
   
        
        
        
        var roomMatrix = [[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,0,0,0,0,3,3,3,3,3,1,1,1,1],
                      [1,1,1,1,1,1,1,1,0,0,0,0,3,2,2,1,3,1,1,1,1],
                      [1,1,1,1,1,1,3,3,0,0,0,0,3,3,3,1,1,1,1,1,1],
                      [1,1,1,1,1,1,3,2,0,0,0,0,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,3,2,0,0,0,0,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,3,2,0,0,0,0,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,3,3,0,0,0,0,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,0,0,0,1,0,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
    for(var row=0; row<roomMatrix.length; row++) {
        for(var col=0; col<roomMatrix[row].length; col++) {
            var id = roomMatrix[row][col];
            
            
            
            switch(id) {
                case 1:
                    
                    break;
                case 0:
                    fill(255, 0, 0);
                    rect(col * 90 + this.position.x - 900,row*20 + this.position.y - 200,200,50);
                    break;
                case 2:
                    fill(86, 88, 89);
                    rect(col * 90 + this.position.x - 900,row*20 + this.position.y - 200,200,50);
                    break;
                case 3:
                    fill(0, 0, 0);
                    rect(col * 90 + this.position.x - 900,row*20 + this.position.y - 200,200,50);
                    
                  
            }
        }
    }
    fill(this.r,this.g,this.b,this.o);
    rect(this.position.x,this.position.y - this.mass * 1.5,this.mass * 12,this.mass * 3);
    fill(255, 0, 0);
    arc(this.position.x + 220,this.position.y - 115,this.mass * 80, this.mass * 15, 180, 360);
    
    
    };
    npc.prototype.texting = function(textx,texty,textw,texth,textb){ 

    if(man.position.x - 60 >= this.x && man.position.x + 60 <= this.x + 240 && man.position.y -15>= this.y && man.position.y + 15 <= this.y + 60){
        if(keyPressed){
        if(keyCode === 40){
        scale(4,1);
        fill(255, 255, 255);
        rect(textx ,texty- 200 ,textw ,texth,10);
        textSize(12);
        
        fill(0, 0, 0);
        
        text(textb ,textx + 20,texty - 180,textw - 40,texth);
        scale(1/4,1);}}
        
        
        
        
        
        
        
        
        
    }

};
    
    
    /***********************
    ///////////////////////
        All the tiles
    ///////////////////////
    ************************/
    /// Title tiles
    var tile0 = new rectangle(100,400,500,200);
    var tile0_1 = new rectangle(892,280,154*4,370);
    
    // The secret in the title
    
    var tileS_1 = new rectangle(-100,180,2600,700);
    var tileS_2 = new rectangle(1500,350,800,100);
    var lavatileS_3 = new rectangle(-200,300,1700,50);
    var lavatileS_4 = new rectangle(200,200,2400,50);
    var tileS_5 = new rectangle(200,100,200,100);
    var lavatileS_6 = new rectangle(500,70,200,140);
    var lavatileS_7 = new rectangle(890,70,2400,140);
    var startileS_1 = new rectangle(700,130,190,80);
    
    //The Edges
    var ceiling = new rectangle(0,-50,2400,30);
    var leftWall = new rectangle(-50,-20,50,520);
    var rightWall = new rectangle(2400,-20,500,520);
    
   // Level 1
    var tile1 = new rectangle(300,270,500,200);
    var tile2 = new rectangle(780,-50,500,180);
    var tile3 = new rectangle(1400,340,700,100);
    var lavatile1 = new rectangle(0,-50,780,105);
    var startile1 = new rectangle(1900,290,120,30);
    
    // Hub World
    var tile2_1 = new rectangle(-200,450,980,50);
    var tile2_2 = new rectangle(1000,-100,1000,600);
    var tile2_3 = new rectangle(70,100,700,50);
    var tile2_4 = new rectangle(3000,50,80,340);
    var tile2_5 = new rectangle(1000,460,16000,400);
    var tile2_6 = new rectangle(2350,-100,100,500);
    var tile2_7 = new rectangle(6000,-100,5000,600);
    var thintile2_8 = new rectangle(250,-20,400,10);
    var thintile2_9 = new rectangle(250,-130,400,10);
    
    var lavatile2_1 = new rectangle(2350,-500,100,400);
    var lavatile2_2 = new rectangle(650,-100,350,50);
    
    // Level 3
    var tile3_1 = new rectangle(100,-120,14000,500);
    var lavatile3_1 = new rectangle(100,270,1000,200);
    var tile3_2 = new rectangle(13500,-350,500,350);
    var lavatile3_3 = new rectangle(1300,270,1000,200);
    var sandtile3_1 = new rectangle(1100,300,200,100);
    var startile3 = new rectangle(1400,-300,200,50);
    
    // level 4
    var tile4_1 = new rectangle(0,1350,5500,500);
    var tile4_2 = new rectangle(0,850,5000,100);
    var tile4_3 = new rectangle(-900,-850,1000,2700);
    var ladder4_4 = new rectangle(5200,750,200,600);
    var tile4_5 = new rectangle(0,250,5500,300);
    var tile4_6 = new rectangle(5500,-850,3000,2700);
    var startile4 = new rectangle(1150,400,200,30);
    
    /// Level 5
    var icetile5_1 = new rectangle(200,200,800,200);
    var watertile5_2 = new rectangle(1010,200,500,200);
    
    /// All of the entrances to the levels
    
    var world1 = new worldsquare(1200,-300,600,150,230,255,0,1500);
    
    /// The menu of level 1
   
    var level_1 = new worldsquare(level1x,200,600,150,0,255,238,1500);
    var level_2 = new worldsquare(level2x,200,600,150,0,255,238,1500);
    var level_3 = new worldsquare(level3x,200,600,150,0,255,238,1500);
    var level_4 = new worldsquare(level4x,200,600,150,0,255,238,1500);
    var level_5 = new worldsquare(level5x,200,600,150,0,255,238,1500);
    var level_6 = new worldsquare(level6x,200,600,150,0,255,238,1500);
    var level_7 = new worldsquare(level7x,200,600,150,0,255,238,1500);
    var level_8 = new worldsquare(level8x,200,600,150,0,255,238,1500);
    
    
    var limit = function(){constrain(Camera.y,tile4_5.y, 2000);};
    
    
    /*******************************
     /////////////////////////////////
     The main ground and lava that's used in the game
     /////////////////////////////////
     ********************************/
     /// The color customization
     if(currentscene === -3) {
        
        background(189, 206, 255);
        fill(255, 0, 255);
        rect(200,200,120,30);
        fill(0, 0, 255);
        rect(400,200,120,30);
        fill(255, 0, 0);
        rect(600,200,120,30);
        fill(255,213,0);
        rect(800,200,120,30);
        fill(141,228,240);
        rect(400,360,480,120);
        fill(5, 9, 64);
        rect(1000,360,480,120);
        fill(bbb,bbb,bbb);
        rect(1600,450,800,50);
        fill(255, 213, 0);
        rect(1200,240,200,40);
        fill(0, 34, 255);
        rect(1500,240,200,40);
        fill(0, 0, 0);
        rect(1800,240,200,40);
        
        /// The text
        
        scale(4,1);
        textSize(40);
        fill(255, 255, 255);
        text("Choose your color", 100,100);
        text("Background",130,350);
        textSize(20);
        text("Choose your face",300,200);
        textSize(12);
        text("Happy      Sad      Neither",306,260);
        textSize(40);
        fill(www,www,www);
        text("Return", 430, 485);
        
        textSize(12);
        scale(1/4,1);
        
        //// The funciton
        if(mousePressed && mouseX >= 50 && mouseX <= 80  &&  mouseY >= 200 && mouseY <= 230) {
            man.r = 255; 
            man.g = 0; 
            man.b = 255;
            scale(4,1);
            textSize(50);
            fill(man.r,man.g,man.b);
            text("Selected",30,290);
           man.opacity = 1500;
            scale(1/4,1);
            
        }
        if(mousePressed && mouseX >= 100 && mouseX <= 130  &&  mouseY >= 200 && mouseY <= 230) {
            man.r = 0; 
            man.g = 0; 
            man.b = 255;
            scale(4,1);
            textSize(50);
            fill(man.r,man.g,man.b);
            text("Selected",30,290);
            man.opacity = 1500;
            scale(1/4,1);
            
        }
        if(mousePressed && mouseX >= 150 && mouseX <= 180  &&  mouseY >= 200 && mouseY <= 230) {
            man.r = 255; 
            man.g = 0; 
            man.b = 0;
            scale(4,1);
            textSize(50);
            fill(man.r,man.g,man.b);
            text("Selected",30,290);
            man.opacity = 1500;
            scale(1/4,1);
            
        }
        
        if(mousePressed && mouseX >= 200 && mouseX <= 230  &&  mouseY >= 200 && mouseY <= 230) {
            man.r = 255; 
            man.g = 213; 
            man.b = 0;
            scale(4,1);
            textSize(50);
            fill(man.r,man.g,man.b);
            text("Selected",30,290);
            man.opacity = 1500;
            scale(1/4,1);
            
        }
        
        if(mousePressed && mouseX >= 250 && mouseX <= 280  &&  mouseY >= 200 && mouseY <= 230) {
            man.r = 0; 
            man.g = 0; 
            man.b = 0;
            scale(4,1);
            textSize(50);
            fill(man.r,man.g,man.b);
            text("Selected",30,290);
            man.opacity = 0;
            scale(1/4,1);
            
        }
        
        if(mousePressed && mouseX >= 400 && mouseX <= 600 &&  mouseY >= 450 && mouseY <= 500) {
            
            currentscene = -1;
            
        }
        
        
        if(mouseX >= 400 && mouseX <= 600 &&  mouseY >= 450 && mouseY <= 500) {bbb +=10; www-= 10;}
         
         else{bbb -=10; www+= 10;}
         if(bbb > 255) {bbb = 255;}
         if(www < 0) {www = 0;}
        
        
    if(mousePressed && mouseX >= 100 && mouseX <= 220 &&  mouseY >= 360 && mouseY <= 5480) {
        background1 = 141;
        background2 = 228;
        background3 = 240;
        var sky = "day";
        tc = 0;
        wc = 110;
        wc2 = 250;
        wc3 = 243;
        scale(4,1);
        textSize(20);
        text("Selected",115,400);//110, 250, 243
        scale(1/4,1);
    }
    if(mousePressed && mouseX >= 250 && mouseX <= 370 &&  mouseY >= 360 && mouseY <= 480) {
        background1 = 5;
        background2 = 9;
        background3 = 64;
        var sky = "night";
        tc = 255;
        wc = 0;
        wc2 = 0;
        wc3 = 0;
        roomlight = 100;
        scale(4,1);
        textSize(20);
        text("Selected",260,400);
        scale(1/4,1);
    }
    
    if(mousePressed && mouseX >= 300 && mouseX <= 350 &&  mouseY >= 240 && mouseY <= 280) {
        
        happyface = true;
        neutral = false;
        sadface = false;
        scale(4,1);
        textSize(15);
        text("Selected",360,310);
        scale(1/4,1);
    }
        
    if(mousePressed && mouseX >= 375 && mouseX <= 425 &&  mouseY >= 240 && mouseY <= 280) {
        
        happyface = false;
        neutral = false;
        sadface = true;
        scale(4,1);
        textSize(15);
        text("Selected",360,310);
        scale(1/4,1);
    }    
    
    if(mousePressed && mouseX >= 450 && mouseX <= 500 &&  mouseY >= 240 && mouseY <= 280) {
        
        happyface = false;
        neutral = false;
        sadface = false;
        scale(4,1);
        textSize(15);
        text("Selected",360,310);
        scale(1/4,1);
    }        
        
        if(sunrise === true){
            
            fill(255, 212, 91);
            rect(100,360,200,50);
            
            if(mousePressed && mouseX >= 25 && mouseX <=75 && mouseY >=360 && mouseY <= 410){
                
                
                scale(4,1);
                fill(0, 0, 0);
                textSize(8);
                text("Selected",30,380);
                textSize(12);
                scale(1/4,1);
                background1 = 255;
                background2 = 212;
                background3 = 91;
                wc = 255;
                wc2 = 212;
                wc3 = 91;
                var sky = "Sunrise";
                
                
            }
            
            
        }
        
        
    }
     
     
     /// The title screen
     if(currentscene === -1) {
         
         
         
         background(64, 222, 120);
         
         
         pushMatrix();
         
         cam = false;
         
         popMatrix();
        
         
         
         dude.applyForce(friction);
         dude.applyForce(gravity);
         dude.update();
         dude.display();
         dude.checkedges();
         tile0.display();
         tile0.dudeinteraction();
         tile0_1.dudeinteraction();
         
         
         
         fill(255, 255, 255);
         ellipse(1200,150,1600,200);
         fill(b,b,b);
         rect(900,280,600,90,10);
         fill(bb,bb,bb);
         rect(900,390,600,90,10);
         fill(random(0,255),random(0,255),random(0,255));
         ellipse(1900,350,240,60);
         
         
         
         /// Everyything related to the text
         
         scale(4,1);
         var font = createFont("monospace");
         textFont(font,50);
         
         fill(0, 0, 0);
         text("A Game ", 210,150);
         
         fill(w,w,w);
         text("Play", 240,340);
         
         fill(ww,ww,ww);
         text("Map",256,440);
         
         fill(255, 255, 255);
         scale(1/4,1);
         // The interactions with the menu screen
         
         if(mouseX >= 220 && mouseX <= 375 &&  mouseY >= 280 && mouseY <= 370) {b -=10; w+= 10;}
         
         else{b +=10; w-= 10;}
         
         if(b > 255) {b = 255;}
         if(w < 0) {w = 0;}
         if(mousePressed && mouseX >= 220 && mouseX <= 375 &&  mouseY >= 280 && mouseY <= 370) {
             
             currentscene = 0;
             hm = 800;
             man.velocity.x = 0;
             man.velocity.y = 0;
             minute_ = 0;
             n = 0;
             playSound(getSound("retro/laser1"));
             
         }
         
         if(mouseX >= 220 && mouseX <= 375 &&  mouseY >= 390 && mouseY <= 480) {bb -=10; ww+= 10;}
         
         else{bb +=9; ww-= 9;}
         if(bb > 255) {bb = 255;}
         if(ww < 0) {ww = 0;}
         
         if(mousePressed && mouseX >= 220 && mouseX <= 375 &&  mouseY >= 390 && mouseY <= 480) {currentscene = -2;}
         
         if(mousePressed && mouseX >= 445 && mouseX <= 505 &&  mouseY >= 320 && mouseY <= 390) {currentscene = -3;}
         
         if(dude.position.x +48 >= 1780 && dude.position.x -48 <= 2020  && dude.position.y +15 >=320 && dude.position.y - 15<=480){currentscene = -5;}
         
         if(mousePressed && mouseX >= dude.position.x/4 -15 && mouseX <= dude.position.x /4 + 15 &&  mouseY >= dude.position.y-15 && mouseY <= dude.position.y + 15) {
             
             
             dude.r = random(0,255);
             dude.g = random(0,255);
             dude.b = random(0,255);
             scale(1/2,1/2);
             
         }
         
         
         textSize(13);
         
         /// The guys physics
         
         
         
     }
     
     
    ///// All the levels
    if(currentscene === 0) {
        
    
        clouds(500,200,50,50);
        clouds(100,250,50,50);
    
    
    // The cam
    
    cam = lock;
    
    
    ////////The tiles, and floor within the level;
    
    
    tile1.display();
    tile1.interaction();
    tile2.display();
    tile2.interaction();
    tile3.display();
    tile3.interaction();
    lavatile1.drawlava();
    lavatile1.lavainteraction();
    startile1.star();
    if(man.position.y + 16 >= startile1.y  && man.position.y - 16<= startile1.y+ startile1.height && man.position.x + 60>= startile1.x  && man.position.x - 60 < startile1.x + startile1.width)
    { 
       playSound(getSound("retro/coin"));
       man.position.x = nX;
        man.position.y = 350;
        man.velocity.x = 0;
        man.velocity.y = 0;
        currentscene =1;
        pause = true;
        
        
    }
    
    
    
    
    scale(4,1);
    fill(tc, tc, tc);
    text("You jump automatically, use this brown bottom like a zipline. Press up to jump even higher, but don't touch the lava", 215, 200, 150, 500);
    scale(1/4,1);
    
    if(move === true){
    man.applyForce(gravity);
    man.applyForce(friction);
    man.update();}
    man.display();
    man.checkedges();
    }
    /// The hub world
    
    if(currentscene === 1) {
        
        clouds(100,100,70,70);
    
        cam = lock;
        menu = true;
        
        scale(4,1);
        fill(tc,tc,tc);
text("Press up when reaching a wall to jump off from it. Press the right key right after to go back to the wall.",30,200,200,300);
    scale(1/4,1);
    
    scale(4,1);
        fill(tc,tc,tc);
text("Press the left key to perform a far jump off from the wall",30,0,150,300);
    scale(1/4,1);
    
    
    tile2_1.display();
    tile2_1.interaction();
    tile2_5.display();
    tile2_5.interaction();
    tile2_2.display();
    tile2_2.interaction();
    tile2_3.display();
    tile2_3.interaction();
    tile2_4.display();
    tile2_4.interaction();
    tile2_6.display();
    tile2_6.interaction();
    tile2_7.display();
    tile2_7.interaction();
    
    thintile2_8.thin(100);
    thintile2_8.thininteraction();
    thintile2_9.thin(100);
    thintile2_9.thininteraction();
    
    lavatile2_1.drawlava();
    lavatile2_1.lavainteraction();
    lavatile2_2.drawlava();
    lavatile2_2.lavainteraction();
    
    world1.display("World_1");
    world1.interaction(-6);
    pushMatrix();
    scale(4,1);
    text("World 1",330,-220);
    popMatrix();
    
    
    if(level2 === true){
        fill(0, 255, 9);
        rect(world1.x + 1/10 * world1.width, world1.y + 8/10 * world1.height, 60, 15);
        
    }
    
    if(level3 === true){
        fill(0, 255, 9);
        rect(world1.x + 2.3/10 * world1.width, world1.y + 8/10 * world1.height, 60, 15);
        
    }
    
    if(move === true){
    man.applyForce(gravity);
    man.applyForce(friction);
    man.update();
    man.display();
    man.checkedges();
    
    }
    
    
    }
    
    
    //// The rest of the levels
    
    if(currentscene === 2) {
       
        
        menu = false;
        scale(1/2,1/2);
        clouds(bigcloud,-600,400,200);
        tower(12000,-1300,1200,1200);
        clouds(200,100,70,70);
        bigcloud-=1;
        
    cam = lock;

        tile3_1.display();
        tile3_1.interaction();
        lavatile3_1.drawlava();
        lavatile3_1.lavainteraction();
        tile3_2.display();
        tile3_2.interaction();
        lavatile3_3.drawlava();
        lavatile3_3.lavainteraction();
        sandtile3_1.quicksand();
        sandtile3_1.sandinteraction();
        startile3.star();
        if(man.position.y + 16 >= startile3.y  && man.position.y - 16<= startile3.y+ startile3.height && man.position.x + 60>= startile3.x  && man.position.x - 60 < startile3.x + startile3.width)
    { 
       
       man.position.x = nX;
        man.position.y = nY;
        man.velocity.x = 0;
        man.velocity.y = 0;
        
        pause = true;
        level2 = true;
        currentscene = 1;
        
        
    }
    
    
        scale(4,1);
        fill(tc,tc,tc);
        text("Jump inside of the quicksand, watch out for the lava",220,170,200,1000);
    scale(1/4,1);    
        
        
        
        if(move === true){
        man.applyForce(friction);
        man.applyForce(gravity);
        man.update();}
        man.display();
        man.checkedges();
        scale(2,2);
        
    fill(255, 255, 255);
    rect(Camera.x/4 - 100,Camera.y - 100,2400,200,10);
    
    scale(1,1);
    fill(tc,tc,tc);
    
    
    menuscene2 = true;
    if(menuscene2 === true){
        
    scale(8,2);
    textSize(3);
    text("Deaths: " + s,Camera.x/8 + 1/10 * width,Camera.y/4 + 100,100,mheight);
    text(currentscene + 1, Camera.x/4 + 1/10 * width,Camera.y + mheight + 1/5 * mheight);
    text("Stocks: " + stocks,Camera.x/4 + 265,Camera.y+90);
    scale(1/4,1);
    
    
    fill(tc,tc,tc,100);
    rect(Camera.x + 2180,Camera.y + 440,200,50,6);
    scale(4,1);
    textSize(20);
    text("",Camera.x/4 + 555, Camera.y + 470);
    textSize(12);
    
    
    
    if(mousePressed && pause === true && mouseX >= 545 && mouseX <= 595 && mouseY>= 440 && mouseY <= 490)
    {
    scale(1,1);
    pauseScreen();
    
    scale(1/4,1);
    
    
    
    
    
    
    
    
    if(man.position.x -60 >= pauseX && man.position.x <= pauseX + pauseWidth && man.position.y >= pauseY && man.position.y <= pauseY + pauseHeight){
        fill(0, 61, 18);
        rect(man.position.x-60,man.position.y-15,120,30);
        
    }
    scale(4,1);
    
    }
    else{move = true;}   
    
    fill(0, 0, 0);
    rect(Camera.x/4 + 470,Camera.y + 30,120,50,10);
    fill(255, 255, 255);
    text("Timer:",Camera.x/4 + 480,Camera.y + 55);
    textSize(12);
    text( minute_  + ":" ,Camera.x/4 + 525,Camera.y + 55.1);
    text( n/66 ,Camera.x/4 + 545,Camera.y + 55.1);
    scale(1/4,1);
    n++;
    
    
    fill(112, 112, 112);
    rect(Camera.x + 775,Camera.y + 12,850,65, 10);
    
    fill(255,0,0);
    rect(Camera.x + 800,Camera.y + 20,800,50, 20);
    
    fill(30, 255, 0);
    rect(Camera.x + 800,Camera.y + 20,hm,50, 20);
    
    
    }
         
        
    
    }
    if(currentscene === 3) {
        
    
        menu = true;
        
        background(189, 189, 189);
        
        
         for (var i = 0; i < 4; i++){
            
            windows[i] = new glass (i * 300 + 200 , 1150);
            interact[i] = new rectangle (i * 1200 + 780 , 1145,440,115);
            windows[i].display();
            
            interact[i].interaction();
            
        }
        fill(189,189,189);
        rect(5000,850,1200,900);
        ladder4_4.ladder();
        ladder4_4.ladderinteraction();
        tile4_1.floor();
        tile4_1.interaction();
        tile4_2.floor();
        tile4_2.interaction();
        tile4_3.floor();
        tile4_3.interaction();
        tile4_5.floor();
        tile4_5.interaction();
        tile4_6.floor();
        tile4_6.interaction();
        limit();
        towerman.display();
        towerman.sadface();
        
        
        
        startile4.star();
        startile4.starinteraction();
        
        if(man.position.y + 16 >= startile4.y  && man.position.y - 16<= startile4.y+ startile4.height && man.position.x + 60>= startile4.x  && man.position.x - 60 < startile4.x + startile4.width)
    { 
       
       man.position.x = nX;
        man.position.y = nY;
        man.velocity.x = 0;
        man.velocity.y = 0;
        
        pause = true;
        level3 = true;
        currentscene = 1;
        
    }
        
        if(move === true){
        scale(1/4,1);
        man.applyForce(friction);
        man.applyForce(gravity);
        man.update();
        man.display();
        man.checkedges();
        scale(1,1);
        
        }
        
         fill(0,0,0,roomlight);
        rect(-10000,-10000,2000000,2000000);
        
        towerman.texting(650,1340,300,130,"Hello there. You press the up or down key to climb ladders. You can also press the space bar button to jump out of it                                                                                                                        Jimmy");
        
        
       /*** if(man.position.y >= tile4_5.y + tile4_5.height && man.position.y <= tile4_2.y ){
        
        Camera.y = 510;
        if(man.position.x >= tile4_6.x -1500 && man.position.x <= tile4_6.x){Camera.x = 3800;
        
        if(Camera.x >=3800){Camera.x = 3800;}
        if(Camera.x <=3800){Camera.x = 3800;}
        
        }
    
        
        }
        else  if(man.position.x >= tile4_6.x -1500 && man.position.x <= tile4_6.x){Camera.x = 3500;
        
        if(Camera.x >=3500){Camera.x = 3500;}
        if(Camera.x <=3500){Camera.x = 3500;}
        
        }
        else{Camera.y = Camera.y;}****/
        
       
        
    }
    if(currentscene === 4) {
        
        
        
        ice = true;
        
        icetile5_1.ice();
        icetile5_1.iceinteraction();
        watertile5_2.water();
        watertile5_2.waterinteraction();
        
        
        // Character Functions
    if(move === true){    
        
    man.applyForce(gravity);
    man.applyForce(friction);
    man.update();
    
    }
    man.display();
    man.checkedges();
    
    
    
    
        
    }
    else{ice = false;}
    if(currentscene === 5) {
        
        nY = 5000;
        man.position.y = -5000;
        background(0, 217, 255);
        scale(4,1);
        textSize(300);
        text("",140,450);
        scale(1/4,1);
        
    }
    
     //The secret levels{
     if(currentscene === -5){
         
         tileS_1.water();
         tileS_1.dudewaterinteraction();
         tileS_2.display();
         tileS_2.dudeinteraction();
         lavatileS_3.drawlava();
         lavatileS_3.dudelavainteraction();
         lavatileS_4.drawlava();
         lavatileS_4.dudelavainteraction();
         tileS_5.display();
         tileS_5.dudeinteraction();
         lavatileS_6.drawlava();
         lavatileS_6.dudelavainteraction();
         lavatileS_7.drawlava();
         lavatileS_7.dudelavainteraction();
         startileS_1.star();
         startileS_1.dudestarinteraction();
         
         
         
         if(mousePressed && mouseX >= dude.position.x/4 -15 && mouseX <= dude.position.x /4 + 15 &&  mouseY >= dude.position.y-15 && mouseY <= dude.position.y + 15) {
             
             
             dude.r = random(0,255);
             dude.g = random(0,255);
             dude.b = random(0,255);
             
         }
         
        
         
         dude.applyForce(friction);
         dude.applyForce(gravity);
         dude.update();
         dude.display();
         dude.checkedges();
         
         
     }
     
     /// The map
     
    if(currentscene === -2) {
        
       
        
        if(mousePressed  && mouseX >= 20 &&            mouseX < 110 && mouseY >= 40 && mouseY <= 200)                 {currentscene = 0;}
        
        
        
        
    }
    
    // The unlock sunset screen
    if(currentscene === -4){
        
        background(221, 252, 250);
        
        scale(1,1);
        fill(252, 212, 91);
        rectMode(CENTER);
        rect(1200,300,800,200);
        
        scale(4,1);
        fill(0, 0, 0);
        textSize(20);
        text("Congratulations, you beat the secret level, now you unlocked an evening background",50,40,500,800);
        text("Return",270,300);
        scale(1/4,1);
        
        if(mousePressed && mouseX >= 200 && mouseX <= 400 && mouseY>= 200 && mouseY <= 400){
            
            currentscene = "Loading";
            sunrise = true;
            
        }
        
        
    }
    
    // The loading screen
    if(currentscene === "Loading"){
        
        background(0, 0, 0);
        fill(255, 255, 255);
        textSize(30);
        scale(4,1);
        text("Please Wait",200,200);
        
        timer+=10;
        if(timer >= 400){currentscene = -1;}
        
        
    }
    if(currentscene === "Winning"){
        
        pushMatrix();
        background(255, 255, 255);
        cam = false;
        scale(4,1);
        
        y+=1;
        if(y >= 100){currentscene = 1; y = 0;}
        textSize(40);
        textFont(sew,30);
        text("Congratualtions, you beat this level, move on to the         next one",80,100,500,2000);
        textFont(fontss);
        
        
        popMatrix();
        
        
        
    }
    // Area 1 level selection
    
    if(currentscene === -6){
        
        move = false;
        cam = false;
        background(world1.r, world1.g, world1.b);
        fill(0, 255, 140);
        rect(0,0,2400,50,10);
        frame.square();
        
        
        level_1.display("Level1");
        level_1.interaction(2);
        level_2.display("Level1");
        level_2.interaction(3);
        level_3.display("Level1");
        level_3.interaction(4);
        level_4.display("Level1");
        level_4.interaction(5);
        level_5.display("Level1");
        level_5.interaction(5);
        level_6.display("Level1");
        level_6.interaction(5);
        level_7.display("Level1");
        level_7.interaction(5);
        
        
        pushMatrix();
        
        scale(4,1);
        fill(0, 0, 0);
        textSize(40);
        
        text("Select A Level",120,100);
        textSize(30);
        text("Level 1", level1x/4 + 15,280);
        text("Level 2", level2x/4 + 15,280);
        text("Level 3", level3x/4 + 15,280);
        text("Level 4", level4x/4 + 15,280);
        text("Level 5", level5x/4 + 15,280);
        text("Level 6", level6x/4 + 15,280);
        text("Level 7", level7x/4 + 15,280);
        
        textSize(20);
        text("Return", 250 ,30);
        textSize(30);
        
        
        text("Press Left and Right to Scroll        Press Space To Begin",30,430,600,2000);
        
       popMatrix();
        
        if(keyPressed){
            
            
            if(keyCode === 39){  level1x -=50; level2x-=50; level3x-=50; level4x -=50; level5x -= 50; level6x -=50; level7x-=50; level8x-=50;}
            if(keyCode === 37) { level1x += 50; level2x +=50; level3x+=50;level4x+=50; level5x +=50; level6x +=50; level7x +=50;level8x+=50;}
            
            
        }
        
        //Level1{}
        
        if(level_1.x >= frame.x * 4  && level_1.x + level_1.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect === true){
                
            playSound(getSound("retro/boom2"));
            leveleffect = false;
            
            }
            
             if(keyPressed){
                
                if(key.code === 32){
                    
                    currentscene = 2;
                    move = true;
                    man.position.y = -200;
                    man.velocity.x = 0;
                    man.velocity.y = 0;
                    man.acceleration.x = 0;
                    man.acceleration.y = 0;
                    
                }
                
            }
            
            
            
            
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            text("Trouble on the tower",220,410);
            
            scale(1/4,1);
            
           
            
            
        }
         else{leveleffect = true;}
         
         if(level_2.x >= frame.x * 4  && level_2.x + level_2.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect2 === true){
                
            playSound(getSound("retro/coin"));
            leveleffect2 = false;
            
            }
            
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level2 === false){
            text("Locked",270,410);
            
            }
            
            else if(level2 ===true){
                
                text("Something Upcoming",210,410);
                
                 if(keyPressed){
                
                if(key.code === 32){
                    
                    currentscene = 2;
                    move = true;
                    man.position.y = -200;
                    man.velocity.x = 0;
                    man.velocity.y = 0;
                    man.acceleration.x = 0;
                    man.acceleration.y = 0;
                    
                }
                
            }
                
                
            }
            
            
            scale(1/4,1);
            
        }
         else{leveleffect2 = true;}
        
        if(level_3.x >= frame.x * 4  && level_3.x + level_3.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect === true){
                
            playSound(getSound("retro/coin"));
            leveleffect = false;
            
            }
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level3 === false){
            text("Locked",270,410);
            
            }
            
            else if(level3 ===true){
                
                text("Something Upcoming",210,410);
                
            }
            
            
            scale(1/4,1);
            
        }
         
        if(level_4.x >= frame.x * 4  && level_4.x + level_4.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect === true){
                
            playSound(getSound("retro/coin"));
            leveleffect = false;
            
            }
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level4 === false){
            text("Locked",270,410);
            
            }
            
            else if(level4 ===true){
                
                text("Something Upcoming",210,410);
                
            }
            
            
            scale(1/4,1);
            
        }
        
        
        if(level_5.x >= frame.x * 4  && level_5.x + level_5.width<= frame.x* 4 + frame.width * 4){
            
            
            if(leveleffect === true){
                
            playSound(getSound("retro/coin"));
            leveleffect = false;
            
            }
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level5 === false){
            text("Locked",270,410);
            
            }
            
            else if(level5 ===true){
                
                text("Something Upcoming",210,410);
                
            }
            
            
            scale(1/4,1);
            
        }
        
        
        if(level_6.x >= frame.x * 4  && level_6.x + level_6.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect === true){
                
            playSound(getSound("retro/coin"));
            leveleffect = false;
            
            }
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level6 === false){
            text("Locked",270,410);
            
            }
            
            else if(level6 ===true){
                
                text("Something Upcoming",210,410);
                
            }
            
            
            scale(1/4,1);
            
        }
        
        
        if(level_7.x >= frame.x * 4  && level_7.x + level_7.width<= frame.x* 4 + frame.width * 4){
            
            if(leveleffect === true){
                
            playSound(getSound("retro/coin"));
            leveleffect = false;
            
            }
            scale(4,1);
            fill(0, 0, 0);
            textSize(16);
            if(level7 === false){
            text("Locked",270,410);
            
            }
            
            else if(level7 ===true){
                
                text("Something Upcoming",210,410);
                
            }
            
            
            scale(1/4,1);
            
        }
        
       
        
        
        
        
        
        
        if(level1x < -3900){level1x = -3899;}
        if(level2x < -3100){level2x = -3099;}
        if(level3x < -2300){level3x = -2299;}
        if(level4x < -1500){level4x = -1499;}
        if(level5x < -700){level5x = -699;}
        if(level6x < 100){level6x = 101;}
        if(level7x < 900){level7x = 901;}
       
        
        if(level1x >900){level1x = 899;}
        if(level2x >1700){level2x = 1699;}
        if(level3x >2500){level3x = 2499;}
        if(level4x >3300){level4x = 3299;}
        if(level5x >4100){level5x = 4099;}
        if(level6x >4900){level6x = 4899;}
        if(level7x >5700){level7x = 5699;}
        
        
        
        if(level2 === false){
        
        fill(0,0,0);
        rect(level_2.x,level_2.y,level_2.width,level_2.height,10);
        
    }
        if(level3 === false){
        
        fill(0,0,0);
        rect(level_3.x,level_3.y,level_3.width,level_3.height,10);
        
    } 
        if(level4 === false){
        
        fill(0,0,0);
        rect(level_4.x,level_4.y,level_4.width,level_4.height,10);
        
    }
        if(level5 === false){
        
        fill(0,0,0);
        rect(level_5.x,level_5.y,level_5.width,level_5.height,10);
        
    }
        if(level6 === false){
        
        fill(0,0,0);
        rect(level_6.x,level_6.y,level_6.width,level_6.height,10);
        
    }
        if(level7 === false){
        
        fill(0,0,0);
        rect(level_7.x,level_7.y,level_7.width,level_7.height,10);
        
    }
        
    
    
        
       
  
  if(mousePressed && mouseX >= 0 && mouseX  <= 600  && mouseY  >= 0 && mouseY <= 50 ){
      
      currentscene = 1;
      move = true;
      man.position.x = 1500;
      man.position.y = -120;
      man.velocity.x = 0;
      man.velocity.y = 0;
      man.acceleration.x = 0;
      man.acceleration.y = 0;
      circle = false;
      
  }
  
  if(level2 === true && mousePressed && mouseX >= level_2.x /4 && mouseX  <= level_2.x/4 + level_2.width/4 && mouseY  >= level_2.y  && mouseY <= level_2.y + level_2.height ){
      
      currentscene = 2;
      man.position.x = 100;
      man.position.y = 80;
      man.velocity.x = 0;
      man.velocity.y = 0;
      man.acceleration.x = 0;
      man.acceleration.y = 0;
      move = true;
      
  }
        
        
        
        
        
    }
    
    
    textSize(12);
    
    
    
   

    
    if(ice === true){
        
    fill(201, 245, 245);
    triangle(200,0,300,60,400,0); 
    
    for(var i = 0; i < 10; i++){
    
    snowing[i] = new snowballs(random(0,2400),random(-0,500));
    snowing[i].display();
    
    
    
    
    }

}
    if(currentscene > -1 && currentscene < 5){
     
    /********************************************* 
     
    The menu wont show up for now since menu is false
    
    
    ****************************/
    
    if(happyface === true){man.happyface();}
    if(sadface === true){man.sadface();}
    if(n/60 >= 60){n = 0; minute_ ++;}
    
    pushMatrix();
    Camera.y -= 7;
    cam = false;
    
    
    
    scale(4,1);
    fill(0, 0, 0);
    if(menu === true){
   
    if(happyface === true){scale(1/4,1);}
    if(sadface === true){scale(1/4,1);}
    
    
    
    
   
    fill(255, 255, 255);
    rect(Camera.x/4 - 100,Camera.y - 100,2400,200,10);
    
    scale(1,1);
    fill(0,0,0);
    
    
    
    text("Deaths: " + s,Camera.x/4 + 1/10 * width,Camera.y + 20,100,mheight);
    text(currentscene + 1, Camera.x/4 + 1/10 * width,Camera.y + mheight + 1/5 * mheight);
    text("Stocks: " + stocks,Camera.x/4 + 265,Camera.y+90);
    scale(1/4,1);
    
    
    fill(tc,tc,tc,100);
    rect(Camera.x + 2180,Camera.y + 440,200,50,6);
    scale(4,1);
    textSize(20);
    text("",Camera.x/4 + 555, Camera.y + 470);
    textSize(12);
    
    
    
    if(mousePressed && pause === true && mouseX >= 545 && mouseX <= 595 && mouseY>= 440 && mouseY <= 490)
    {
    scale(1,1);
    pauseScreen();
    
    scale(1/4,1);
    
    
    
    
    
    
    
    
    if(man.position.x -60 >= pauseX && man.position.x <= pauseX + pauseWidth && man.position.y >= pauseY && man.position.y <= pauseY + pauseHeight){
        fill(0, 61, 18);
        rect(man.position.x-60,man.position.y-15,120,30);
        
    }
    scale(4,1);
    
    }
    else{move = true;}   
    
    fill(0, 0, 0);
    rect(Camera.x/4 + 470,Camera.y + 30,120,50,10);
    fill(255, 255, 255);
    text("Timer:",Camera.x/4 + 480,Camera.y + 55);
    textSize(12);
    text( minute_  + ":" ,Camera.x/4 + 525,Camera.y + 55.1);
    text( n/66 ,Camera.x/4 + 545,Camera.y + 55.1);
    scale(1/4,1);
    n++;
    
    
    fill(112, 112, 112);
    rect(Camera.x + 775,Camera.y + 12,850,65, 10);
    
    fill(255,0,0);
    rect(Camera.x + 800,Camera.y + 20,800,50, 20);
    
    fill(30, 255, 0);
    rect(Camera.x + 800,Camera.y + 20,hm,50, 20);
    
    
    }
    popMatrix();
    
    ///// The health bar
    
    
    
   
    
    cam = true;
    camera.y -=200;
    
    
   
    
    
}
    
    
    else if(currentscene < -1){n=0;n+=0;}
    
   
    
    
    
    
    
    
    
    
    
    constrain(up.y,-45,0);
    
    if(keyPressed){
         
         
         
         if(keyCode === 37) {dude.applyForce(left);}
    else if(keyCode === 39) {dude.applyForce(right);}
    else if(keyCode === 40) {dude.applyForce(down);}}
    
    
    
 
    
    
    
    
};



            }};
        
            // Get the canvas that Processing-js will use
            var canvas = document.getElementById("myCanvas"); 
            // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
            var processingInstance = new Processing(canvas, sketchProc); 
         </script>
        <!--<iframe src="https://www.khanacademy.org/computer-programming/spin-off-of-a-ball-camera/6262208069681152/embedded?id=1638883895376-0.558888473822696&amp;origin=file%3A%2F%2F&amp;buttons=no&amp;embed=yes&amp;editor=no&amp;author=yes" frameborder="0" style="position: absolute; left : 0%;border: 0px; width: 100%; height: 100%; scrolling="></iframe>-->

        
    
    
    </body>
</html>